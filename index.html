<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plataforma Financeira</title>

  <!-- Fonte Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* ===== RESET ===== */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #020617, #020617, #0f172a);
      color: #e5e7eb;
      min-height: 100vh;
      display: flex;
    }

    /* ===== SIDEBAR ===== */
    .sidebar {
      width: 260px;
      background: rgba(2,6,23,0.9);
      border-right: 1px solid #1e293b;
      padding: 24px;
    }

    .logo {
      font-size: 22px;
      font-weight: 700;
      color: #38bdf8;
      margin-bottom: 40px;
    }

    /* ===== MENU LATERAL ===== */
    .menu ul {
      list-style: none;
      margin-top: 40px;
    }

    .menu li {
      margin-bottom: 20px;
    }

    .menu a {
      display: block;
      padding: 12px 16px;
      border-radius: 12px;
      text-decoration: none;
      color: #94a3b8;
      font-weight: 500;
      transition: all 0.25s;
    }

    .menu a:hover {
      background: rgba(56, 189, 248, 0.15);
      color: #38bdf8;
    }

    .menu li.active a {
      background: rgba(56, 189, 248, 0.2);
      color: #38bdf8;
      font-weight: 600;
    }

    /* ===== CONTE√öDO PRINCIPAL ===== */
    .content {
      flex: 1;
      padding: 40px;
    }

    .header {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 30px;
    }

    /* ===== CARDS FINANCEIROS ===== */
    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .card {
      background: #020617;
      border: 1px solid #1e293b;
      border-radius: 22px;
      padding: 24px;
    }

    .card span {
      font-size: 14px;
      color: #94a3b8;
    }

    .card h2 {
      margin-top: 10px;
      font-size: 26px;
      font-weight: 700;
    }

    .blue h2 { color: #38bdf8; }
    .red h2 { color: #ef4444; }
    .green h2 { color: #22c55e; }
    .yellow h2 { color: #facc15; }

    /* ===== CONTROLES ===== */
    .controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }

    .controls input {
      background: #020617;
      border: 1px solid #1e293b;
      color: #e5e7eb;
      padding: 14px;
      border-radius: 14px;
      font-size: 14px;
    }

    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    input[type=number] {
      -moz-appearance: textfield;
    }

    .controls button {
      background: linear-gradient(135deg, #2563eb, #38bdf8);
      border: none;
      color: #fff;
      padding: 14px;
      border-radius: 14px;
      cursor: pointer;
      font-weight: 600;
      transition: 0.25s;
    }

    /* ===== TOGGLE RECEITA / DESPESA / PATRIMONIO ===== */
    .toggle {
      display: flex;
      background: #020617;
      border: 1px solid #1e293b;
      border-radius: 18px;
      overflow: hidden;
    }

    .toggle button {
      flex: 1;
      padding: 14px 0;
      border: none;
      background: transparent;
      color: #94a3b8;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .toggle button.active.receita {
      background: rgba(34,197,94,0.15);
      color: #22c55e;
    }

    .toggle button.active.despesa {
      background: rgba(239,68,68,0.15);
      color: #ef4444;
    }

    .toggle button.active.patrimonio {
      background: rgba(250,204,21,0.15);
      color: #facc15;
    }

    /* ===== GR√ÅFICO ===== */
    .chart {
      height: 300px;
      border-radius: 24px;
      border: 1px solid #1e293b;
      background: #020617;
      padding: 20px;
    }

    /* ===== REGISTROS ===== */
    .records h3 {
      margin-bottom: 10px;
      font-size: 18px;
      font-weight: 600;
      color: #38bdf8;
    }

    .records li {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
      background: #020617;
      border: 1px solid #1e293b;
      padding: 6px 10px;
      border-radius: 10px;
      font-size: 14px;
      color: #e5e7eb;
    }

    .records input {
      background: #020617;
      border: 1px solid #1e293b;
      color: #e5e7eb;
      border-radius: 8px;
      padding: 4px 8px;
      width: 100px;
      margin-right: 6px;
      font-size: 14px;
    }

    .records .edit-buttons button {
      background: linear-gradient(135deg, #2563eb, #38bdf8);
      border: none;
      color: #fff;
      padding: 4px 8px;
      border-radius: 6px;
      cursor: pointer;
      margin-left: 2px;
      font-size: 12px;
    }

  </style>
</head>
<body>

  <!-- ===== SIDEBAR ===== -->
  <aside class="sidebar">
    <div class="logo">Finance<span style="color:#fff">Pro</span></div>

    <nav class="menu">
      <ul>
        <li class="active"><a href="#">Dashboard</a></li>
      </ul>
    </nav>
  </aside>

  <!-- ===== CONTE√öDO PRINCIPAL ===== -->
  <main class="content">

    <!-- DASHBOARD -->
    <div id="dashboard">
      <div class="header">Dashboard</div>

      <!-- CARDS -->
      <section class="cards">
        <div class="card blue">
          <span>Receita Total</span>
          <h2 id="cardReceita">R$ 0</h2>
        </div>
        <div class="card red">
          <span>Despesas</span>
          <h2 id="cardDespesa">R$ 0</h2>
        </div>
        <div class="card yellow">
          <span>Patrim√¥nio</span>
          <h2 id="cardPatrimonio">R$ 0</h2>
        </div>
        <div class="card green">
          <span>Saldo</span>
          <h2 id="cardSaldo">R$ 0</h2>
        </div>
      </section>

      <!-- CONTROLES DE ADI√á√ÉO -->
      <section class="controls">
        <input type="number" id="valor" placeholder="Valor (R$)">
        <div class="toggle">
          <button class="active receita" onclick="setTipo('receita', this)">Receita</button>
          <button class="despesa" onclick="setTipo('despesa', this)">Despesa</button>
          <button class="patrimonio" onclick="setTipo('patrimonio', this)">Patrim√¥nio</button>
        </div>
        <input type="date" id="mes">
        <button onclick="adicionar()">Adicionar</button>
      </section>

      <!-- GR√ÅFICO -->
      <div class="chart">
        <canvas id="financeChart"></canvas>
      </div>

      <!-- REGISTROS DE ITENS -->
      <section class="records" style="margin-top: 30px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
        <div>
          <h3>Receitas</h3>
          <ul id="listaReceita" style="list-style: none; padding: 0;"></ul>
        </div>
        <div>
          <h3>Despesas</h3>
          <ul id="listaDespesa" style="list-style: none; padding: 0;"></ul>
        </div>
        <div>
          <h3>Patrim√¥nio</h3>
          <ul id="listaPatrimonio" style="list-style: none; padding: 0;"></ul>
        </div>
      </section>

    </div>

  </main>

  <!-- ===== CHART.JS ===== -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    let tipoSelecionado = 'receita';
    let dados = JSON.parse(localStorage.getItem('financeiro')) || [];

    const cardReceita = document.getElementById('cardReceita');
    const cardDespesa = document.getElementById('cardDespesa');
    const cardPatrimonio = document.getElementById('cardPatrimonio');
    const cardSaldo = document.getElementById('cardSaldo');

    const listaReceita = document.getElementById('listaReceita');
    const listaDespesa = document.getElementById('listaDespesa');
    const listaPatrimonio = document.getElementById('listaPatrimonio');

    function setTipo(tipo, el) {
      tipoSelecionado = tipo;
      document.querySelectorAll('.toggle button').forEach(b => b.classList.remove('active'));
      el.classList.add('active');
    }

    const labels = ['Jan','Fev','Mar','Abr','Mai','Jun'];
    const chart = new Chart(document.getElementById('financeChart'), {
      type: 'line',
      data: {
        labels,
        datasets: [
          { label: 'Receita', data: [], borderColor: '#22c55e', tension: 0.35 },
          { label: 'Despesas', data: [], borderColor: '#ef4444', tension: 0.35 },
          { label: 'Patrim√¥nio', data: [], borderColor: '#facc15', tension: 0.35 },
          { label: 'Saldo', data: [], borderColor: '#38bdf8', tension: 0.35 }
        ]
      },
      options: { responsive: true, maintainAspectRatio: false }
    });

    function adicionar() {
      const valor = Number(document.getElementById('valor').value);
      const mes = document.getElementById('mes').value;
      if (!valor || !mes) return;

      const novoItem = { id: Date.now(), valor, tipo: tipoSelecionado, mes };
      dados.push(novoItem);
      localStorage.setItem('financeiro', JSON.stringify(dados));
      atualizar();
    }

    function atualizar() {
      listaReceita.innerHTML = '';
      listaDespesa.innerHTML = '';
      listaPatrimonio.innerHTML = '';

      let receitas = Array(6).fill(0);
      let despesas = Array(6).fill(0);
      let patrimonio = Array(6).fill(0);

      dados.forEach(d => {
        const i = new Date(d.mes).getMonth();
        if (i < 6) {
          if (d.tipo === 'receita') receitas[i] += d.valor;
          else if (d.tipo === 'despesa') despesas[i] += d.valor;
          else if (d.tipo === 'patrimonio') patrimonio[i] += d.valor;
        }

        const li = document.createElement('li');
        const valorFormatado = d.valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

        li.innerHTML = `
          <span class="item-text">${valorFormatado} - ${d.mes}</span>
          <span class="edit-buttons">
            <button onclick="iniciarEdicao(${d.id})">‚úèÔ∏è</button>
            <button onclick="excluirItem(${d.id})">üóëÔ∏è</button>
          </span>
        `;

        if(d.tipo === 'receita') listaReceita.appendChild(li);
        else if(d.tipo === 'despesa') listaDespesa.appendChild(li);
        else if(d.tipo === 'patrimonio') listaPatrimonio.appendChild(li);
      });

      const saldo = receitas.map((r,i)=>r-despesas[i]+patrimonio[i]);

      chart.data.datasets[0].data = receitas;
      chart.data.datasets[1].data = despesas;
      chart.data.datasets[2].data = patrimonio;
      chart.data.datasets[3].data = saldo;
      chart.update();

      const totalReceita = receitas.reduce((a,b)=>a+b,0);
      const totalDespesa = despesas.reduce((a,b)=>a+b,0);
      const totalPatrimonio = patrimonio.reduce((a,b)=>a+b,0);
      const totalSaldo = totalReceita - totalDespesa + totalPatrimonio;

      cardReceita.innerText = `R$ ${totalReceita.toLocaleString('pt-BR')}`;
      cardDespesa.innerText = `R$ ${totalDespesa.toLocaleString('pt-BR')}`;
      cardPatrimonio.innerText = `R$ ${totalPatrimonio.toLocaleString('pt-BR')}`;
      cardSaldo.innerText = `R$ ${totalSaldo.toLocaleString('pt-BR')}`;
      cardSaldo.style.color = totalSaldo > 0 ? '#22c55e' : totalSaldo < 0 ? '#ef4444' : '#e5e7eb';
    }

    function iniciarEdicao(id) {
      const item = dados.find(d => d.id === id);
      if(!item) return;

      const li = [...document.querySelectorAll('.records li')].find(li => li.querySelector('button')?.onclick.toString().includes(`${id}`));
      if(!li) return;

      li.innerHTML = `
        <input type="number" value="${item.valor}" id="edit-${id}">
        <button class="save-btn">üíæ</button>
        <button class="cancel-btn">‚ùå</button>
      `;

      li.querySelector('.save-btn').onclick = () => {
        const novoValor = Number(document.getElementById(`edit-${id}`).value);
        if(novoValor) {
          item.valor = novoValor;
          localStorage.setItem('financeiro', JSON.stringify(dados));
          atualizar();
        }
      };

      li.querySelector('.cancel-btn').onclick = () => atualizar();
    }

    function excluirItem(id) {
      dados = dados.filter(d=>d.id!==id);
      localStorage.setItem('financeiro', JSON.stringify(dados));
      atualizar();
    }

    atualizar();
  </script>

</body>
</html>

