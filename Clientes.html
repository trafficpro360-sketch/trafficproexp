<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Finance Pro ‚Äî Clientes</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg-main:#020617;
  --border:#1e293b;
  --blue:#38bdf8;
  --red:#ef4444;
  --green:#22c55e;
  --text:#e5e7eb;
  --muted:#94a3b8;
}

*{margin:0;padding:0;box-sizing:border-box}

body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
  background:radial-gradient(1200px 600px at 10% -10%, #0f172a, #020617);
  color:var(--text);
  min-height:100vh;
  padding:32px;
}

/* HEADER */
.top-bar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:24px;
}

.header{
  font-size:32px;
  font-weight:700;
}

.acoes{
  display:flex;
  gap:12px;
}

/* BOT√ïES */
.btn{
  padding:10px 16px;
  border-radius:14px;
  border:1px solid rgba(56,189,248,.4);
  background:rgba(56,189,248,.12);
  color:var(--blue);
  cursor:pointer;
  font-weight:600;
}

/* FILTRO DE DATAS */
.controls{
  display:flex;
  gap:12px;
  margin-bottom:20px;
}

.controls input{
  padding:12px;
  border-radius:14px;
  border:1px solid var(--border);
  background:rgba(15,23,42,.7);
  color:#fff;
}

/* CARD / GR√ÅFICO */
.card{
  background:rgba(15,23,42,.7);
  border:1px solid var(--border);
  border-radius:26px;
  padding:24px;
  margin-bottom:24px;
}

.chart{
  height:340px;
}

/* TAREFAS */
.tarefas input{
  width:100%;
  padding:12px;
  margin-bottom:10px;
  border-radius:14px;
  border:1px solid var(--border);
  background:rgba(2,6,23,.7);
  color:#fff;
}

.tarefas ul{
  list-style:none;
  margin-top:10px;
}

.tarefas li{
  background:rgba(2,6,23,.6);
  padding:10px;
  border-radius:12px;
  margin-bottom:8px;
  font-size:14px;
}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  align-items:center;
  justify-content:center;
  backdrop-filter:blur(6px);
}

.modal.active{display:flex}

.modal-content{
  width:360px;
  background:linear-gradient(180deg, rgba(56,189,248,.05), rgba(15,23,42,.95));
  border:1px solid rgba(56,189,248,.18);
  border-radius:26px;
  padding:26px;
}

.modal-content h3{
  margin-bottom:12px;
}

.modal-content input{
  width:100%;
  padding:12px;
  margin-bottom:10px;
  border-radius:14px;
  border:1px solid var(--border);
  background:rgba(2,6,23,.7);
  color:#fff;
}

.modal-content button{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:none;
  font-weight:600;
  cursor:pointer;
  margin-top:6px;
}

/* PAINEL LATERAL DE CLIENTES */
#painelClientes{
  position:fixed;
  top:90px;
  right:40px;
  width:340px;
  background:rgba(15,23,42,.95);
  border:1px solid var(--border);
  border-radius:18px;
  padding:16px;
  display:none;
  max-height:400px;
  overflow-y:auto;
}

#painelClientes li{
  background:rgba(2,6,23,.6);
  padding:10px;
  border-radius:12px;
  margin-bottom:8px;
}
</style>
</head>

<body>

<div class="top-bar">
  <div class="header">Clientes</div>

  <div class="acoes">
    <button class="btn" onclick="window.location.href='index.html'">
      ‚¨ÖÔ∏è Voltar ao Dashboard
    </button>

    <button class="btn" onclick="abrirModalCliente()">‚ûï</button>
    <button class="btn" onclick="togglePainel()">üìã</button>
  </div>
</div>

<div class="controls">
  <input type="date" id="filtroInicio">
  <input type="date" id="filtroFim">
  <button class="btn" onclick="atualizarGrafico()">Filtrar</button>
</div>

<div class="card chart">
  <canvas id="clientesChart"></canvas>
</div>

<div class="card tarefas">
  <h3>Tarefas</h3>

  <input type="date" id="tData">
  <input type="time" id="tHora">
  <input type="text" id="tDesc" placeholder="Descri√ß√£o da tarefa">
  <button class="btn" onclick="adicionarTarefa()">Adicionar</button>

  <ul id="listaTarefas"></ul>
</div>

<!-- MODAL CLIENTE -->
<div class="modal" id="modalCliente">
  <div class="modal-content">
    <h3>Novo Cliente</h3>
    <input id="cNome" placeholder="Nome do cliente">
    <input id="cValor" type="number" placeholder="Valor mensal (R$)">
    <input id="cInicio" type="date">
    <button onclick="salvarCliente()">Salvar</button>
    <button onclick="fecharModal()">Cancelar</button>
  </div>
</div>

<!-- PAINEL LISTA -->
<div id="painelClientes">
  <h3>Clientes</h3>
  <ul id="listaClientes"></ul>
</div>

<script>
let clientes = JSON.parse(localStorage.getItem("clientes")) || [];
let tarefas = JSON.parse(localStorage.getItem("tarefas")) || [];

const chart = new Chart(document.getElementById("clientesChart"),{
  type:"line",
  data:{labels:[],datasets:[]},
  options:{responsive:true,maintainAspectRatio:false}
});

function abrirModalCliente(){
  modalCliente.classList.add("active");
}

function fecharModal(){
  modalCliente.classList.remove("active");
}

function salvarCliente(){
  clientes.push({
    id:Date.now(),
    nome:cNome.value,
    valor:Number(cValor.value),
    inicio:cInicio.value
  });

  localStorage.setItem("clientes",JSON.stringify(clientes));
  fecharModal();
  atualizarGrafico();
  renderClientes();
}

function togglePainel(){
  painelClientes.style.display =
    painelClientes.style.display==="block"?"none":"block";
  renderClientes();
}

function renderClientes(){
  listaClientes.innerHTML="";

  clientes.forEach(c=>{
    const li=document.createElement("li");
    li.innerHTML=`
      <strong>${c.nome}</strong><br>
      R$ ${c.valor}/m√™s<br>
      In√≠cio: ${c.inicio}<br>
      <button class="btn" onclick="removerCliente(${c.id})">Excluir</button>
    `;
    listaClientes.appendChild(li);
  });
}

function removerCliente(id){
  clientes = clientes.filter(c=>c.id!==id);
  localStorage.setItem("clientes",JSON.stringify(clientes));
  atualizarGrafico();
  renderClientes();
}

function atualizarGrafico(){
  let inicioFiltro = filtroInicio.value ? new Date(filtroInicio.value) : null;
  let fimFiltro = filtroFim.value ? new Date(filtroFim.value) : new Date();

  let labels = [];
  let datasets = [];

  clientes.forEach((c,i)=>{
    let data = new Date(c.inicio);
    let total = 0;
    let dados = [];
    let meses = [];

    while(data <= fimFiltro){
      if(!inicioFiltro || data >= inicioFiltro){
        total += c.valor;
        meses.push(data.toLocaleDateString("pt-BR"));
        dados.push(total);
      }
      data.setMonth(data.getMonth()+1);
    }

    labels = meses;

    datasets.push({
      label:c.nome,
      data:dados,
      borderColor:["#38bdf8","#22c55e","#facc15","#ef4444"][i%4]
    });
  });

  chart.data.labels = labels;
  chart.data.datasets = datasets;
  chart.update();
}

function adicionarTarefa(){
  tarefas.push({
    data:tData.value,
    hora:tHora.value,
    desc:tDesc.value
  });

  localStorage.setItem("tarefas",JSON.stringify(tarefas));
  renderTarefas();
}

function renderTarefas(){
  listaTarefas.innerHTML="";

  tarefas.forEach(t=>{
    const li=document.createElement("li");
    li.textContent = `${t.data} ${t.hora} ‚Äî ${t.desc}`;
    listaTarefas.appendChild(li);
  });
}

renderClientes();
renderTarefas();
atualizarGrafico();
</script>

</body>
</html>
